<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retos de Electrónica Básica</title>
    <style>
        /* Estilos generales */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: #f4f4f9;
            color: #333;
        }

        /* Contenedor principal */
        .main-container {
            display: flex;
            min-height: 100vh;
        }

        /* Columna lateral de navegación */
        .sidebar {
            width: 320px;
            background-color: #333a45;
            color: #fff;
            padding: 20px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            overflow-y: auto;
            transition: transform 0.3s ease; /* Animación suave si se oculta */
        }
        .sidebar h1 {
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 25px;
            color: #4A90E2; /* Azul eléctrico */
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar li a {
            display: block;
            color: #fff;
            text-decoration: none;
            padding: 12px 15px;
            border-radius: 5px;
            margin-bottom: 8px;
            transition: background-color 0.3s;
        }
        .sidebar li a:hover, .sidebar li a.active {
            background-color: #4A90E2;
        }
        .sidebar li a .topic-number {
            font-weight: bold;
            margin-right: 8px;
            display: block;
            font-size: 0.8em;
            opacity: 0.8;
        }

        /* Área de contenido principal */
        .content-area {
            flex-grow: 1;
            margin-left: 320px; /* Espacio para la sidebar por defecto */
            padding: 40px;
            transition: margin-left 0.3s ease;
        }

        /* Estilo para los paneles de retos */
        .challenge-panel {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 25px 35px;
            display: none; /* Ocultos por defecto */
            max-width: 900px; /* Para que no se estire demasiado en pantallas grandes */
            margin: 0 auto;   /* Centrado */
        }
        .challenge-panel h2 {
            font-size: 2em;
            color: #4A90E2;
            margin-top: 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .challenge-panel.active {
            display: block; /* Muestra el panel activo */
        }
        .challenge-panel h3 {
            font-size: 1.3em;
            color: #333a45;
            margin-top: 25px;
        }
        .challenge-panel ul {
            list-style-type: '✓  ';
            padding-left: 20px;
        }
        .challenge-panel li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>

    <div class="main-container">
        <nav class="sidebar">
            <h1>Retos de Electrónica ⚡</h1>
            <ul id="challenge-list">
                </ul>
        </nav>

        <main class="content-area" id="content-panels">
             </main>
    </div>

    <script>
        // --- 1. DATOS DE LOS RETOS ---
        const challengeData = [
            {
                title: "Reto 1: El Domador de Electrones",
                introduction: "¡Hoy os enfrentaréis a la ley más fundamental de la electrónica! Vuestra misión es convertiros en 'domadores de electrones', controlando el brillo de una luz no por arte de magia, sino aplicando la poderosa Ley de Ohm.",
                description: "Vuestro reto es montar un circuito simple con un LED y experimentar cómo cambia su intensidad de brillo al utilizar tres resistencias de valores distintos (por ejemplo, 220Ω, 1kΩ y 10kΩ).",
                applications: "Este principio es la base del control en electrónica. Se usa para ajustar el volumen en un equipo de música o regular la velocidad de un motor.",
                materials: ["1 x Protoboard", "1 x Portapilas o fuente de 5V", "1 x Diodo LED", "1 x Resistencia de 220Ω", "1 x Resistencia de 1kΩ", "1 x Resistencia de 10kΩ", "Varios cables de conexión"],
                tools: ["Tabla del código de colores de resistencias", "Opcional: Multímetro"]
            },
            {
                title: "Reto 2: El Divisor de Voltaje",
                introduction: "Imaginad que tenéis una fuente de gran poder (9V), pero necesitáis alimentar un componente delicado que solo admite 3V. ¿Cómo lo hacéis? La respuesta es el divisor de voltaje.",
                description: "Construiréis un divisor de voltaje utilizando dos resistencias. El reto consiste en calcular los valores de las resistencias necesarias para obtener un voltaje de salida específico.",
                applications: "Los divisores de voltaje son fundamentales para la lectura de sensores analógicos.",
                materials: ["1 x Protoboard", "1 x Fuente de alimentación", "2 x Resistencias (¡a calcular!)", "Varios cables de conexión"],
                tools: ["Multímetro (¡esencial para este reto!)", "Calculadora"]
            },
            {
                title: "Reto 3: Activar un LED usando un transistor NPN",
                introduction: "A veces necesitamos activar componentes con una señal muy débil o con un simple toque. El transistor 2N2551 actuará como un interruptor electrónico activado por una pequeña corriente.",
                description: "Vuestro reto es montar un circuito en la protoboard usando el transistor 2N2551. Conectaréis un pulsador a la base del transistor (a través de una resistencia). Al pulsar el botón, una pequeña corriente entrará por la base y permitirá que una corriente mayor fluya desde el colector, encendiendo el LED. ¡Sin el transistor, este control no sería tan eficiente!",
                applications: "Este circuito es la base de los amplificadores y de la automatización. Así funcionan los sensores de movimiento que encienden luces o los sistemas de alarma.",
                materials: ["1 x Fuente de alimentación (Pilas o 5V)", "1 x Transistor NPN 2N2551", "1 x Pulsador (Pushbutton)", "1 x Diodo LED", "1 x Resistencia 330Ω (Para el LED)", "1 x Resistencia 10kΩ (Para la Base)", "Protoboard y cables"],
                tools: ["Hoja de datos (Datasheet) del 2N2551", "Multímetro"]
            },
            {
                title: "Reto 4: El Cerebro Lógico",
                introduction: "El mundo digital se basa en decisiones simples: SÍ o NO. Hoy programaréis puertas lógicas en vuestro ESP32.",
                description: "Programaréis el ESP32 para que emule una puerta lógica AND. Un LED solo se encenderá si presionáis dos botones a la vez.",
                applications: "Las puertas lógicas son los ladrillos de todos los ordenadores y móviles actuales.",
                materials: ["1 x Placa ESP32", "1 x Protoboard", "2 x Pulsadores", "1 x LED", "3 x Resistencias"],
                tools: ["Ordenador", "Cable USB"]
            },
            {
                title: "Reto 5: El LED que Respira",
                introduction: "¿Cómo podemos crear una luz que cambie suavemente? Usando PWM (Modulación por Ancho de Pulso).",
                description: "Programaréis el ESP32 para que la intensidad de un LED aumente y disminuya gradualmente (efecto fading).",
                applications: "La PWM se usa para controlar velocidad de motores, intensidad de luces y servos.",
                materials: ["1 x Placa ESP32", "1 x Protoboard", "1 x LED", "1 x Resistencia"],
                tools: ["Ordenador", "Cable USB"]
            },
            {
                title: "Reto 6: El Control Remoto por Cable",
                introduction: "¡Es hora de hablar con vuestro circuito! Usaréis el puerto serie para enviar órdenes desde el PC.",
                description: "Crearéis un sistema donde al enviar una letra desde el ordenador, el ESP32 encenderá o apagará un LED.",
                applications: "La comunicación serie (UART) es estándar para GPS, sensores industriales y depuración.",
                materials: ["1 x Placa ESP32", "1 x Protoboard", "1 x LED", "1 x Resistencia"],
                tools: ["Ordenador", "Monitor Serie"]
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const challengeList = document.getElementById('challenge-list');
            const contentPanels = document.getElementById('content-panels');

            // --- 2. Generar dinámicamente el HTML ---
            challengeData.forEach((challenge, index) => {
                const challengeId = `reto-${index + 1}`;

                // Crear enlace en la barra lateral
                const listItem = document.createElement('li');
                listItem.innerHTML = `<a href="#${challengeId}" class="challenge-link"><span class="topic-number">Reto ${index + 1}</span>${challenge.title.split(': ')[1]}</a>`;
                challengeList.appendChild(listItem);

                // Crear panel de contenido
                const panel = document.createElement('section');
                panel.id = challengeId;
                panel.className = 'challenge-panel';
                
                let materialsHtml = '<ul>';
                challenge.materials.forEach(item => { materialsHtml += `<li>${item}</li>`; });
                materialsHtml += '</ul>';

                let toolsHtml = '<ul>';
                challenge.tools.forEach(item => { toolsHtml += `<li>${item}</li>`; });
                toolsHtml += '</ul>';

                panel.innerHTML = `
                    <h2>${challenge.title}</h2>
                    <h3>Introducción: ¡Vuestro objetivo!</h3>
                    <p>${challenge.introduction}</p>
                    <h3>¿Qué vais a construir?</h3>
                    <p>${challenge.description}</p>
                    <h3>Aplicaciones en el Mundo Real</h3>
                    <p>${challenge.applications}</p>
                    <h3>Lista de Materiales</h3>
                    ${materialsHtml}
                    <h3>Lista de Herramientas</h3>
                    ${toolsHtml}
                `;
                contentPanels.appendChild(panel);
            });

            // --- 3. Lógica de visualización ---
            const links = document.querySelectorAll('.challenge-link');
            const panels = document.querySelectorAll('.challenge-panel');
            
            function showPanel(targetId) {
                panels.forEach(panel => panel.classList.remove('active'));
                links.forEach(link => link.classList.remove('active'));

                const targetPanel = document.querySelector(targetId);
                // Solo activamos el link si el menú existe (no estamos en modo presentación)
                const activeLink = document.querySelector(`a[href="${targetId}"]`);

                if (targetPanel) targetPanel.classList.add('active');
                if (activeLink) activeLink.classList.add('active');
            }

            // Listeners para clicks normales
            links.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    showPanel(targetId);
                });
            });

            // --- 4. MODO QUIOSCO / SOLO LECTURA (La parte nueva) ---
            const urlParams = new URLSearchParams(window.location.search);
            const retoEspecifico = urlParams.get('ver'); // Busca ?ver=reto-X

            if (retoEspecifico) {
                // A) Si hay petición específica en la URL:
                
                // 1. Ocultar la barra lateral completamente
                const sidebar = document.querySelector('.sidebar');
                if(sidebar) sidebar.style.display = 'none';

                // 2. Quitar el margen izquierdo del contenido para que ocupe todo el ancho
                const contentArea = document.querySelector('.content-area');
                if(contentArea) {
                    contentArea.style.marginLeft = '0';
                    contentArea.style.width = '100%';
                }

                // 3. Mostrar SOLAMENTE el reto pedido
                // Aseguramos que existe el panel con ese ID (ej: reto-1)
                const panelPedido = document.getElementById(retoEspecifico);
                if (panelPedido) {
                    panelPedido.classList.add('active');
                } else {
                    // Si escriben mal el número, mostramos error o el primero
                    alert('Reto no encontrado: ' + retoEspecifico);
                }

            } else {
                // B) Modo normal (Si no hay ?ver=...):
                // Mostrar el primer reto por defecto
                showPanel('#reto-1');
            }
        });
    </script>
</body>
</html>


